<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>CADAgent PRO - Free AI Assistant for CAD</title>
    <meta name="description" content="Edit your CAD models with natural language â€” inside Fusion 360, SolidWorks, and more. Completely free. No steep learning curves, no menu hunting.">
    <meta name="keywords" content="AI, CAD, 3D modeling, automation, engineering, design, free, natural language, Fusion 360, SolidWorks">
    <meta name="author" content="CADAgent PRO">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="logotype.png">

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Three.js for 3D rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

    <style>
        :root {
            --gradient-cyan-blue: linear-gradient(135deg, #0BA5EC 0%, #0069CB 100%);
            --gradient-purple-violet: linear-gradient(135deg, #8B5CF6 0%, #4B32B7 100%);
            --gradient-pink-fuchsia: linear-gradient(135deg, #F472B6 0%, #C026D3 100%);
            --gradient-core: linear-gradient(180deg, #1E1E1E 0%, #232538 100%);

            --base-bg: #1E1E1E;
            --surface: #252526;
            --primary-text: #E0E0E0;
            --secondary-text: #A1A1AA;
            --ghost-text: rgba(224, 224, 224, 0.6);
            --primary-accent: #0BA5EC;
            --focus-accent: #8B5CF6;
            --panel-border: #3E3E42;
            --success: #6EE7B7;
            --error: #F87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gradient-core);
            color: var(--primary-text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            padding: 32px 0;
            text-align: center;
        }

        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .logo {
            width: 48px;
            height: 48px;
        }

        .brand-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--primary-text);
        }

        .free-badge {
            background: var(--gradient-cyan-blue);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 16px;
            display: inline-block;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 64px 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.2;
            margin-bottom: 32px;
            background: var(--gradient-cyan-blue);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--secondary-text);
            margin-bottom: 48px;
            font-weight: 500;
        }

        .cta-container {
            margin-bottom: 32px;
        }

        .waitlist-form {
            display: flex;
            gap: 16px;
            max-width: 400px;
            margin: 0 auto 24px;
        }

        input[type="email"] {
            flex: 1;
            padding: 16px 20px;
            border: 1px solid var(--panel-border);
            background-color: var(--surface);
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            color: var(--primary-text);
            outline: none;
            transition: all 0.2s ease;
        }

        input[type="email"]:focus {
            border-color: var(--focus-accent);
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        input[type="email"]::placeholder {
            color: var(--ghost-text);
        }

        .cta-button {
            background: var(--gradient-cyan-blue);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.12s ease-in-out;
            white-space: nowrap;
            text-decoration: none; /* prevent underline on anchor buttons */
        }

        .cta-button:hover {
            transform: scale(1.04);
            filter: brightness(1.1);
        }

        .cta-button:disabled {
            background: var(--panel-border);
            color: var(--secondary-text);
            cursor: not-allowed;
            transform: none;
            filter: none;
        }

        .trust-signal {
            color: var(--ghost-text);
            font-size: 14px;
            font-style: italic;
        }

        /* Features Section */
        .features {
            padding: 96px 0;
            background: rgba(37, 37, 38, 0.3);
            backdrop-filter: blur(12px);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 48px;
            margin-top: 64px;
        }

        .feature-card {
            background: var(--surface);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: var(--focus-accent);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 24px;
            background: var(--gradient-purple-violet);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .feature-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--primary-text);
        }

        .feature-description {
            color: var(--secondary-text);
            line-height: 1.6;
        }

        .section-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 24px;
            color: var(--primary-text);
        }

        .section-subtitle {
            text-align: center;
            color: var(--secondary-text);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* How It Works Section */
        .how-it-works {
            padding: 96px 0;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 32px;
            margin-top: 64px;
        }

        .step {
            text-align: center;
            position: relative;
        }

        .step-number {
            width: 48px;
            height: 48px;
            background: var(--gradient-cyan-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 1.2rem;
            color: white;
        }

        .step-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--primary-text);
        }

        .step-description {
            color: var(--secondary-text);
            line-height: 1.6;
        }

        /* Supported Editors */
        .supported-editors {
            padding: 96px 0;
            background: rgba(37, 37, 38, 0.3);
            backdrop-filter: blur(12px);
        }

        .editors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-top: 48px;
        }

        .editor-card {
            background: var(--surface);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            position: relative;
        }

        .coming-soon {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 10px;
            font-weight: bold;
            color: var(--primary-text);
            background: var(--gradient-purple-violet);
            padding: 4px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Message Styles */
        .message {
            display: none;
            margin-top: 24px;
            padding: 16px 24px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 16px;
            text-align: center;
        }

        .success-message {
            color: #121212;
            background: var(--success);
            border: 1px solid var(--success);
        }

        .error-message {
            color: #121212;
            background: var(--error);
            border: 1px solid var(--error);
        }

        /* Alternative Auth CTA */
        .auth-alternative {
            margin-top: 32px;
            text-align: center;
        }

        .auth-alternative .auth-text {
            color: var(--secondary-text);
            margin-bottom: 24px;
        }

        .auth-alternative .auth-text.or-text {
            margin-bottom: 4px;
            font-style: italic;
        }

        /* Footer */
        footer {
            padding: 48px 0;
            text-align: center;
            border-top: 1px solid var(--panel-border);
            margin-top: 64px;
        }

        .footer-content {
            font-size: 14px;
            color: var(--secondary-text);
        }

        .footer-links {
            margin-top: 16px;
        }

        .footer-links a {
            color: var(--secondary-text);
            text-decoration: none;
            margin: 0 16px;
            transition: color 0.2s ease;
        }

        .footer-links a:hover {
            color: var(--primary-accent);
        }

        /* Demo Section */
        .demo {
            padding: 96px 0;
            background: rgba(37, 37, 38, 0.3);
            backdrop-filter: blur(12px);
        }

        .demo-interface {
            max-width: 1000px;
            margin: 48px auto 0;
            background: var(--surface);
            border: 1px solid var(--panel-border);
            border-radius: 16px;
            overflow: hidden;
        }

        .demo-input-section {
            padding: 32px;
            border-bottom: 1px solid var(--panel-border);
        }

        .model-viewer {
            height: 500px;
            position: relative;
            background: var(--base-bg);
        }

        .viewer-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            background: var(--surface);
            border-bottom: 1px solid var(--panel-border);
        }

        .viewer-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-text);
        }

        .viewer-status {
            margin-left: auto;
            font-size: 0.8rem;
            color: var(--secondary-text);
        }

        .viewer-canvas {
            height: 400px;
            position: relative;
            background: linear-gradient(135deg, var(--base-bg) 0%, #2a2a2a 100%);
        }

        .viewer-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: var(--ghost-text);
        }

        .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .viewer-controls {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 24px;
            background: var(--surface);
            border-top: 1px solid var(--panel-border);
        }

        .control-btn {
            background: transparent;
            border: 1px solid var(--panel-border);
            color: var(--secondary-text);
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            border-color: var(--focus-accent);
            color: var(--focus-accent);
        }

        .control-help {
            margin-left: auto;
            font-size: 11px;
            color: var(--ghost-text);
            font-style: italic;
        }

        .ai-indicator {
            width: 12px;
            height: 12px;
            background: var(--gradient-cyan-blue);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .suggestions {
            margin-bottom: 24px;
        }

        .suggestions-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--secondary-text);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .suggestion-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .suggestion-btn {
            background: transparent;
            border: 1px solid var(--panel-border);
            color: var(--secondary-text);
            padding: 8px 12px;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .suggestion-btn:hover {
            border-color: var(--focus-accent);
            color: var(--focus-accent);
        }

        .suggestion-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chat-input {
            display: flex;
            gap: 12px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--panel-border);
            background: var(--base-bg);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            color: var(--primary-text);
            outline: none;
            transition: all 0.2s ease;
        }

        .chat-input input:focus {
            border-color: var(--focus-accent);
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .chat-input input::placeholder {
            color: var(--ghost-text);
        }

        .chat-input button {
            background: var(--gradient-cyan-blue);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.12s ease-in-out;
            white-space: nowrap;
        }

        .chat-input button:hover {
            transform: scale(1.04);
            filter: brightness(1.1);
        }

        .chat-input button:disabled {
            background: var(--panel-border);
            color: var(--secondary-text);
            cursor: not-allowed;
            transform: none;
            filter: none;
        }

        .output-panel {
            background: var(--surface);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            min-height: 500px;
        }

        .output-tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--panel-border);
        }

        .tab-btn {
            background: transparent;
            border: none;
            color: var(--secondary-text);
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: var(--gradient-purple-violet);
            color: white;
        }

        .tab-content {
            flex: 1;
            overflow-y: auto;
        }

        .code-block {
            background: var(--base-bg);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            color: var(--primary-text);
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .json-output {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            color: var(--primary-text);
            margin-bottom: 16px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .comparison-section {
            background: var(--base-bg);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 16px;
        }

        .comparison-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--secondary-text);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .limit-message {
            background: rgba(247, 113, 113, 0.1);
            border: 1px solid rgba(247, 113, 113, 0.3);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            text-align: center;
        }

        .limit-message p {
            color: var(--error);
            font-size: 14px;
            margin-bottom: 12px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .demo-interface {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }

            .hero {
                padding: 48px 0;
            }

            .waitlist-form {
                flex-direction: column;
                gap: 16px;
            }

            .waitlist-form input,
            .waitlist-form button {
                width: 100%;
            }

            .features,
            .how-it-works,
            .supported-editors {
                padding: 64px 0;
            }

            .features-grid,
            .steps {
                gap: 32px;
            }

            .free-badge {
                margin-left: 0;
                margin-top: 8px;
                display: block;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <img src="logotype.png" alt="CADAgent PRO Logo" class="logo">
                <div>
                    <span class="brand-name">CADAgent PRO</span>
                    <span class="free-badge">Completely Free</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>Edit your CAD models with natural language</h1>
                <p class="hero-subtitle">No more menu hunting. No steep learning curves. Just chat with your CAD software like you're talking to a colleague.</p>
                
                <div class="cta-container">
                    <form id="waitlist-form" class="waitlist-form">
                        <input type="email" name="email" placeholder="Enter your email" required />
                        <button type="submit" class="cta-button">Get Early Access</button>
                    </form>
                    <p class="trust-signal">Join other designers who are tired of complex CAD workflows</p>
                    <div id="message" class="message"></div>

                    <!-- Added alternative sign-up CTA -->
                    <div class="auth-alternative">
                        <p class="auth-text or-text"><em>Or</em></p>
                        <p class="auth-text">Create a free account to get started at launch.</p>
                        <a href="oauth.html" class="cta-button">Create Account</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="demo">
            <div class="container">
                <h2 class="section-title">See It In Action</h2>
                <p class="section-subtitle">Try our AI assistant and watch it generate 3D models from your descriptions</p>
                
                <div class="demo-interface">
                    <div class="demo-input-section">
                        <div class="suggestions">
                            <div class="suggestions-title">Quick Examples</div>
                            <div class="suggestion-buttons">
                                <button class="suggestion-btn" onclick="useSuggestion('Create a 20mm cube with a 5mm hole through the center')">20mm cube with hole</button>
                                <button class="suggestion-btn" onclick="useSuggestion('Make a cylindrical gear with 20 teeth')">Cylindrical gear</button>
                                <button class="suggestion-btn" onclick="useSuggestion('Design a phone stand with 60 degree angle')">Phone stand</button>
                                <button class="suggestion-btn" onclick="useSuggestion('Create a hexagonal nut M8 thread')">Hexagonal nut</button>
                            </div>
                        </div>
                        
                        <div class="chat-input">
                            <input type="text" id="demo-input" placeholder="Describe your 3D model..." />
                            <button onclick="submitDemo()" id="demo-submit">Generate 3D Model</button>
                        </div>
                    </div>
                    
                    <div class="model-viewer">
                        <div class="viewer-header">
                            <div class="ai-indicator"></div>
                            <span class="viewer-title">3D Model Viewer</span>
                            <div class="viewer-status" id="viewer-status">Ready to generate...</div>
                        </div>
                        <div class="viewer-canvas" id="viewer-canvas">
                            <div class="viewer-placeholder">
                                <div class="placeholder-icon">ðŸŽ¯</div>
                                <p>Enter a description above to generate your 3D model</p>
                            </div>
                        </div>
                        <div class="viewer-controls">
                            <button class="control-btn" onclick="resetView()">Reset View</button>
                            <button class="control-btn" onclick="toggleWireframe()">Wireframe</button>
                            <span class="control-help">Click and drag to rotate â€¢ Scroll to zoom</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <h2 class="section-title">Turn Complex CAD Operations Into Simple Conversations</h2>
                <p class="section-subtitle">Stop fighting with menus and dimensions. Start designing with words.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ’¬</div>
                        <h3 class="feature-title">Chat Your Way to Better Designs</h3>
                        <p class="feature-description">Say "Create a 50mm cube with a 10mm hole" and watch it appear instantly. No sketching, no dimensioning, no hunting through menus.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">âš¡</div>
                        <h3 class="feature-title">Works Inside Your Existing Tools</h3>
                        <p class="feature-description">Fusion 360, SolidWorks, AutoCAD â€” CADAgent PRO plugs right into what you're already using. No file migrations, no workflow disruptions.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ”„</div>
                        <h3 class="feature-title">Iterate in Seconds, Not Minutes</h3>
                        <p class="feature-description">Change your mind? Just say "Make the hole 15mm instead" and it updates instantly. No redrawing, no starting over.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="how-it-works">
            <div class="container">
                <h2 class="section-title">How It Works</h2>
                <p class="section-subtitle">Three simple steps to transform your CAD workflow</p>
                
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3 class="step-title">Install & Connect</h3>
                        <p class="step-description">Download CADAgent PRO and connect it to your CAD software. Takes less than 2 minutes.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3 class="step-title">Chat Naturally</h3>
                        <p class="step-description">Describe what you want to create or modify using plain English. The AI understands your intent.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3 class="step-title">Watch It Happen</h3>
                        <p class="step-description">Your model updates in real-time. Keep refining through conversation until it's perfect.</p>
                    </div>
                </div>
            </div>
        </section>


        <section class="supported-editors" style="display: flex; justify-content: center; align-items: center;">
            <div class="container">
                <h2 class="section-title">Works With Your Favorite CAD Software</h2>
                <p class="section-subtitle">Native integration with the tools you already know and love</p>
                
                <div class="editors-grid">
                    <div class="editor-card">SolidWorks</div>
                    <div class="editor-card">AutoCAD</div>
                    <div class="editor-card">SketchUp</div>
                    <div class="editor-card">Solid Edge</div>
                    <div class="editor-card">Onshape</div>
                    <div class="editor-card">
                        Fusion 360
                        <span class="coming-soon">Coming Soon</span>
                    </div>
                    <div class="editor-card">Blender</div>
                    <div class="editor-card">FreeCAD</div>
                    <div class="editor-card">Revit</div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2025 CADAgent PRO - Completely Free</p>
                <div class="footer-links"></div>
            </div>
        </div>
    </footer>

    <script>
        // Demo functionality
        let demoUsed = false;
        let scene, camera, renderer, controls;
        let currentModel = null;
        
        function initViewer() {
            const canvas = document.getElementById('viewer-canvas');
            const rect = canvas.getBoundingClientRect();
            
            // Scene setup
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1e1e1e);
            
            // Camera setup
            camera = new THREE.PerspectiveCamera(75, rect.width / rect.height, 0.1, 1000);
            camera.position.set(30, 30, 30);
            
            // Renderer setup
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(rect.width, rect.height);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            
            // Clear placeholder and add canvas
            canvas.innerHTML = '';
            canvas.appendChild(renderer.domElement);
            
            // Controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(50, 50, 50);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // Grid
            const gridHelper = new THREE.GridHelper(100, 100, 0x444444, 0x444444);
            scene.add(gridHelper);
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
        }
        
        function useSuggestion(text) {
            if (demoUsed) return;
            
            document.getElementById('demo-input').value = text;
            submitDemo();
        }
        
        function submitDemo() {
            if (demoUsed) return;
            
            const input = document.getElementById('demo-input');
            const prompt = input.value.trim();
            
            if (!prompt) return;
            
            demoUsed = true;
            
            // Update status
            document.getElementById('viewer-status').textContent = 'Generating model...';
            
            // Disable input and suggestions
            input.disabled = true;
            document.getElementById('demo-submit').disabled = true;
            document.querySelectorAll('.suggestion-btn').forEach(btn => {
                btn.disabled = true;
            });
            
            // Initialize viewer if not already done
            if (!renderer) {
                initViewer();
            }
            
            // Generate model
            generateModel(prompt);
        }
        
        async function generateModel(prompt) {
            try {
                // Configuration - Using Fly.io backend for complete pipeline
                const BACKEND_URL = "https://cadagent-pro.fly.dev"; // Your Fly.io app URL
                
                // Generate complete pipeline (JSON plan + Python code + GLTF execution)
                document.getElementById('viewer-status').textContent = 'Analyzing your request...';
                
                const pipelineResponse = await fetch(BACKEND_URL + '/api/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prompt: prompt
                    })
                });
                
                const pipeline = await pipelineResponse.json();
                console.log('Pipeline response:', pipeline);
                
                if (!pipeline.success) {
                    if (pipeline.error === 'Our backend is busy right now, try again in a couple of minutes') {
                        document.getElementById('viewer-status').textContent = 'Backend busy - showing fallback model';
                        return generateModelFallback(prompt);
                    }
                    throw new Error(pipeline.error || 'Failed to generate CAD pipeline');
                }
                
                // If GLTF is available, load it directly
                if (pipeline.gltf) {
                    document.getElementById('viewer-status').textContent = 'Loading 3D model...';
                    await loadGLTFModel(pipeline.gltf);
                    document.getElementById('viewer-status').textContent = 'Model generated successfully';
                } else if (pipeline.jsonPlan) {
                    // Fallback: Convert JSON plan to Three.js geometry
                    document.getElementById('viewer-status').textContent = 'Rendering from JSON plan...';
                    const geometry = convertJSONPlanToGeometry(pipeline.jsonPlan);
                    renderModel(geometry);
                    document.getElementById('viewer-status').textContent = 'Model generated from JSON plan';
                } else {
                    throw new Error('No valid output received from backend');
                }
                
                // Show completion message
                setTimeout(() => {
                    showCompletionMessage(pipeline);
                }, 2000);
                
            } catch (error) {
                console.error('Error generating model:', error);
                document.getElementById('viewer-status').textContent = 'Error - showing fallback model';
                
                // Fallback to local generation
                generateModelFallback(prompt);
            }
        }
        
        async function generateModelFallback(prompt) {
            document.getElementById('viewer-status').textContent = 'Generating demo model...';
            
            // Use the existing local analysis
            const geometry = analyzePromptAndGenerateGeometry(prompt);
            
            setTimeout(() => {
                renderModel(geometry);
                document.getElementById('viewer-status').textContent = 'Demo model generated';
                
                setTimeout(() => {
                    showLimitMessage();
                }, 2000);
            }, 1000);
        }
        
        async function loadGLTFModel(gltfContent) {
            return new Promise((resolve, reject) => {
                const loader = new THREE.GLTFLoader();
                
                // Parse GLTF content
                loader.parse(gltfContent, '', (gltf) => {
                    // Clear previous model
                    if (currentModel) {
                        scene.remove(currentModel);
                    }
                    
                    // Add new model
                    const model = gltf.scene;
                    scene.add(model);
                    currentModel = model;
                    
                    // Center camera on model
                    const box = new THREE.Box3().setFromObject(model);
                    const center = box.getCenter(new THREE.Vector3());
                    const size = box.getSize(new THREE.Vector3());
                    
                    const maxSize = Math.max(size.x, size.y, size.z);
                    camera.position.set(center.x + maxSize, center.y + maxSize, center.z + maxSize);
                    controls.target.copy(center);
                    controls.update();
                    
                    resolve(model);
                }, (error) => {
                    console.error('GLTF parsing error:', error);
                    reject(error);
                });
            });
        }
        
        function convertJSONPlanToGeometry(jsonPlan) {
            const geometry = {
                type: "mesh",
                objects: []
            };
            
            if (!jsonPlan || !jsonPlan.objects) {
                return geometry;
            }
            
            jsonPlan.objects.forEach(obj => {
                const geometryObj = {
                    position: [0, 0, 0]
                };
                
                // Extract position from transform matrix if available
                if (obj.transform && obj.transform.length === 4) {
                    geometryObj.position = [
                        obj.transform[0][3] || 0,
                        obj.transform[1][3] || 0,
                        obj.transform[2][3] || 0
                    ];
                }
                
                switch (obj.type) {
                    case 'Box':
                        geometryObj.type = 'box';
                        geometryObj.width = obj.params.width || 20;
                        geometryObj.height = obj.params.height || 20;
                        geometryObj.depth = obj.params.depth || 20;
                        break;
                        
                    case 'Cylinder':
                        geometryObj.type = 'cylinder';
                        geometryObj.radius = obj.params.radius || 10;
                        geometryObj.height = obj.params.height || 20;
                        break;
                        
                    case 'Sphere':
                        geometryObj.type = 'sphere';
                        geometryObj.radius = obj.params.radius || 10;
                        break;
                        
                    default:
                        geometryObj.type = 'box';
                        geometryObj.width = 20;
                        geometryObj.height = 20;
                        geometryObj.depth = 20;
                }
                
                geometry.objects.push(geometryObj);
            });
            
            return geometry;
        }
        
        function showCompletionMessage(pipeline) {
            // Create overlay with pipeline details
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const message = document.createElement('div');
            message.style.cssText = `
                background: var(--surface);
                border: 1px solid var(--panel-border);
                border-radius: 12px;
                padding: 32px;
                max-width: 600px;
                max-height: 80vh;
                overflow-y: auto;
                text-align: left;
                color: var(--primary-text);
            `;
            
            // Handle different pipeline response formats
            const jsonPlanDisplay = pipeline.jsonPlan ? JSON.stringify(pipeline.jsonPlan, null, 2) : 'Not available';
            const pythonCodeDisplay = pipeline.pythonCode ? pipeline.pythonCode : 'Not available';
            const statusMessage = pipeline.gltf ? 'Model Generated Successfully!' : 'Pipeline Generated Successfully!';
            
            message.innerHTML = `
                <h3 style="margin-bottom: 16px; color: var(--primary-text); text-align: center;">ðŸŽ‰ ${statusMessage}</h3>
                <div style="margin-bottom: 24px;">
                    <h4 style="color: var(--primary-accent); margin-bottom: 8px;">JSON Plan:</h4>
                    <pre style="background: var(--base-bg); padding: 12px; border-radius: 6px; font-size: 12px; overflow-x: auto; max-height: 200px;">${jsonPlanDisplay}</pre>
                </div>
                <div style="margin-bottom: 24px;">
                    <h4 style="color: var(--primary-accent); margin-bottom: 8px;">Python Code:</h4>
                    <pre style="background: var(--base-bg); padding: 12px; border-radius: 6px; font-size: 12px; overflow-x: auto; max-height: 200px;">${pythonCodeDisplay}</pre>
                </div>
                ${pipeline.message ? `<div style="margin-bottom: 24px;"><p style="color: var(--secondary-text); font-style: italic;">${pipeline.message}</p></div>` : ''}
                <div style="text-align: center;">
                    <button onclick="this.parentElement.parentElement.parentElement.remove()" 
                            style="background: var(--gradient-cyan-blue); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; margin-right: 12px;">
                        Close
                    </button>
                    ${pipeline.pythonCode ? `<button onclick="downloadPythonCode('${btoa(pipeline.pythonCode)}')" 
                            style="background: var(--gradient-purple-violet); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Download Python Code
                    </button>` : ''}
                </div>
            `;
            
            overlay.appendChild(message);
            document.body.appendChild(overlay);
        }
        
        function downloadPythonCode(base64Code) {
            const code = atob(base64Code);
            const blob = new Blob([code], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'cadquery_model.py';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function analyzePromptAndGenerateGeometry(prompt) {
            const geometry = {
                type: "mesh",
                objects: []
            };
            
            const lowerPrompt = prompt.toLowerCase();
            
            // Enhanced prompt analysis with better pattern matching
            if (lowerPrompt.includes('cylinder') || lowerPrompt.includes('gear')) {
                const radius = extractNumber(prompt, 'radius') || extractNumber(prompt, 'diameter', 0.5) || 10;
                const height = extractNumber(prompt, 'height') || 20;
                
                geometry.objects.push({
                    type: "cylinder",
                    radius: radius,
                    height: height,
                    position: [0, 0, 0]
                });
                
                // Add gear teeth if mentioned
                if (lowerPrompt.includes('gear') || lowerPrompt.includes('teeth')) {
                    const teeth = extractNumber(prompt, 'teeth') || 12;
                    for (let i = 0; i < teeth; i++) {
                        const angle = (i / teeth) * Math.PI * 2;
                        const x = Math.cos(angle) * (radius + 2);
                        const z = Math.sin(angle) * (radius + 2);
                        geometry.objects.push({
                            type: "cylinder",
                            radius: 1,
                            height: height + 2,
                            position: [x, 0, z]
                        });
                    }
                }
            } else if (lowerPrompt.includes('sphere') || lowerPrompt.includes('ball')) {
                const radius = extractNumber(prompt, 'radius') || extractNumber(prompt, 'diameter', 0.5) || 10;
                geometry.objects.push({
                    type: "sphere",
                    radius: radius,
                    position: [0, 0, 0]
                });
            } else if (lowerPrompt.includes('hexagon') || lowerPrompt.includes('nut')) {
                const radius = extractNumber(prompt, 'radius') || 8;
                const height = extractNumber(prompt, 'height') || 6;
                geometry.objects.push({
                    type: "polygon",
                    sides: 6,
                    radius: radius,
                    height: height,
                    position: [0, 0, 0]
                });
            } else if (lowerPrompt.includes('stand') || lowerPrompt.includes('angle')) {
                const angle = extractNumber(prompt, 'angle') || extractNumber(prompt, 'degree') || 60;
                
                // Base
                geometry.objects.push({
                    type: "box",
                    width: 40,
                    height: 3,
                    depth: 25,
                    position: [0, -10, 0]
                });
                
                // Angled support
                geometry.objects.push({
                    type: "box",
                    width: 25,
                    height: 2,
                    depth: 30,
                    position: [0, 5, 8],
                    rotation: [Math.PI * angle / 180, 0, 0]
                });
            } else {
                // Default to cube with extracted dimensions
                const size = extractNumber(prompt, 'size') || 
                           extractNumber(prompt, 'width') || 
                           extractNumber(prompt, 'mm') || 20;
                const width = extractNumber(prompt, 'width') || size;
                const height = extractNumber(prompt, 'height') || size;
                const depth = extractNumber(prompt, 'depth') || size;
                
                geometry.objects.push({
                    type: "box",
                    width: width,
                    height: height,
                    depth: depth,
                    position: [0, 0, 0]
                });
            }
            
            // Add holes if mentioned
            if (lowerPrompt.includes('hole')) {
                const holeDiameter = extractNumber(prompt, 'hole') || 5;
                geometry.objects.push({
                    type: "hole",
                    diameter: holeDiameter,
                    position: [0, 0, 0]
                });
            }
            
            return geometry;
        }
        
        function renderModel(geometryData) {
            // Clear previous model
            if (currentModel) {
                scene.remove(currentModel);
            }
            
            const group = new THREE.Group();
            
            geometryData.objects.forEach(obj => {
                let geometry, material, mesh;
                
                switch (obj.type) {
                    case 'box':
                        geometry = new THREE.BoxGeometry(obj.width, obj.height, obj.depth);
                        material = new THREE.MeshPhongMaterial({ color: 0x0BA5EC });
                        mesh = new THREE.Mesh(geometry, material);
                        break;
                        
                    case 'cylinder':
                        geometry = new THREE.CylinderGeometry(obj.radius, obj.radius, obj.height);
                        material = new THREE.MeshPhongMaterial({ color: 0x8B5CF6 });
                        mesh = new THREE.Mesh(geometry, material);
                        break;
                        
                    case 'sphere':
                        geometry = new THREE.SphereGeometry(obj.radius, 32, 32);
                        material = new THREE.MeshPhongMaterial({ color: 0x6EE7B7 });
                        mesh = new THREE.Mesh(geometry, material);
                        break;
                        
                    case 'polygon':
                        geometry = new THREE.CylinderGeometry(obj.radius, obj.radius, obj.height, obj.sides);
                        material = new THREE.MeshPhongMaterial({ color: 0xF472B6 });
                        mesh = new THREE.Mesh(geometry, material);
                        break;
                        
                    default:
                        geometry = new THREE.BoxGeometry(20, 20, 20);
                        material = new THREE.MeshPhongMaterial({ color: 0x0BA5EC });
                        mesh = new THREE.Mesh(geometry, material);
                }
                
                if (mesh) {
                    mesh.position.set(...obj.position);
                    if (obj.rotation) {
                        mesh.rotation.set(...obj.rotation);
                    }
                    mesh.castShadow = true;
                    mesh.receiveShadow = true;
                    group.add(mesh);
                }
            });
            
            // Handle holes (subtract from main geometry)
            const holes = geometryData.objects.filter(obj => obj.type === 'hole');
            if (holes.length > 0 && group.children.length > 0) {
                holes.forEach(hole => {
                    const holeGeometry = new THREE.CylinderGeometry(hole.diameter/2, hole.diameter/2, 100);
                    const holeMaterial = new THREE.MeshPhongMaterial({ color: 0x000000, transparent: true, opacity: 0.3 });
                    const holeMesh = new THREE.Mesh(holeGeometry, holeMaterial);
                    holeMesh.position.set(...hole.position);
                    group.add(holeMesh);
                });
            }
            
            scene.add(group);
            currentModel = group;
            
            // Center camera on model
            const box = new THREE.Box3().setFromObject(group);
            const center = box.getCenter(new THREE.Vector3());
            const size = box.getSize(new THREE.Vector3());
            
            const maxSize = Math.max(size.x, size.y, size.z);
            camera.position.set(center.x + maxSize, center.y + maxSize, center.z + maxSize);
            controls.target.copy(center);
            controls.update();
        }
        
        function renderDemoModel(prompt) {
            // Enhanced fallback demo models that actually showcase features
            const demoGeometry = {
                type: "mesh",
                objects: []
            };
            
            const lowerPrompt = prompt.toLowerCase();
            
            // Detect shape type and create appropriate model
            if (lowerPrompt.includes('cylinder') || lowerPrompt.includes('gear')) {
                // Cylinder or gear
                const radius = extractNumber(prompt, 'radius') || extractNumber(prompt, 'diameter', 0.5) || 10;
                const height = extractNumber(prompt, 'height') || 20;
                
                demoGeometry.objects.push({
                    type: "cylinder",
                    radius: radius,
                    height: height,
                    position: [0, 0, 0]
                });
                
                // Add gear teeth if mentioned
                if (lowerPrompt.includes('gear') || lowerPrompt.includes('teeth')) {
                    const teeth = extractNumber(prompt, 'teeth') || 12;
                    // Create gear teeth as small cylinders around the main cylinder
                    for (let i = 0; i < teeth; i++) {
                        const angle = (i / teeth) * Math.PI * 2;
                        const x = Math.cos(angle) * (radius + 2);
                        const z = Math.sin(angle) * (radius + 2);
                        demoGeometry.objects.push({
                            type: "cylinder",
                            radius: 1,
                            height: height + 2,
                            position: [x, 0, z]
                        });
                    }
                }
            } else if (lowerPrompt.includes('sphere') || lowerPrompt.includes('ball')) {
                // Sphere
                const radius = extractNumber(prompt, 'radius') || extractNumber(prompt, 'diameter', 0.5) || 10;
                demoGeometry.objects.push({
                    type: "sphere",
                    radius: radius,
                    position: [0, 0, 0]
                });
            } else if (lowerPrompt.includes('hexagon') || lowerPrompt.includes('nut')) {
                // Hexagonal nut
                const radius = extractNumber(prompt, 'radius') || 8;
                const height = extractNumber(prompt, 'height') || 6;
                demoGeometry.objects.push({
                    type: "polygon",
                    sides: 6,
                    radius: radius,
                    height: height,
                    position: [0, 0, 0]
                });
            } else if (lowerPrompt.includes('stand') || lowerPrompt.includes('angle')) {
                // Phone stand or angled object
                const angle = extractNumber(prompt, 'angle') || extractNumber(prompt, 'degree') || 60;
                
                // Base
                demoGeometry.objects.push({
                    type: "box",
                    width: 40,
                    height: 3,
                    depth: 25,
                    position: [0, -10, 0]
                });
                
                // Angled support
                demoGeometry.objects.push({
                    type: "box",
                    width: 25,
                    height: 2,
                    depth: 30,
                    position: [0, 5, 8],
                    rotation: [Math.PI * angle / 180, 0, 0]
                });
            } else {
                // Default to cube with extracted dimensions
                const size = extractNumber(prompt, 'size') || 
                           extractNumber(prompt, 'width') || 
                           extractNumber(prompt, 'mm') || 20;
                const width = extractNumber(prompt, 'width') || size;
                const height = extractNumber(prompt, 'height') || size;
                const depth = extractNumber(prompt, 'depth') || size;
                
                demoGeometry.objects.push({
                    type: "box",
                    width: width,
                    height: height,
                    depth: depth,
                    position: [0, 0, 0]
                });
            }
            
            // Add holes if mentioned
            if (lowerPrompt.includes('hole')) {
                const holeDiameter = extractNumber(prompt, 'hole') || 5;
                demoGeometry.objects.push({
                    type: "hole",
                    diameter: holeDiameter,
                    position: [0, 0, 0]
                });
            }
            
            renderModel(demoGeometry);
            document.getElementById('viewer-status').textContent = 'Demo model (API unavailable)';
        }
        
        function extractNumber(text, keyword, multiplier = 1) {
            // Extract numbers that appear near keywords
            const regex = new RegExp(`(?:${keyword}[^\\d]*)(\\d+(?:\\.\\d+)?)`, 'i');
            const match = text.match(regex);
            if (match) {
                return parseFloat(match[1]) * multiplier;
            }
            
            // Also try to find standalone numbers followed by 'mm'
            if (keyword === 'mm') {
                const mmMatch = text.match(/(\d+(?:\.\d+)?)mm/i);
                if (mmMatch) {
                    return parseFloat(mmMatch[1]);
                }
            }
            
            return null;
        }
        
        function resetView() {
            if (currentModel) {
                const box = new THREE.Box3().setFromObject(currentModel);
                const center = box.getCenter(new THREE.Vector3());
                const size = box.getSize(new THREE.Vector3());
                
                const maxSize = Math.max(size.x, size.y, size.z);
                camera.position.set(center.x + maxSize, center.y + maxSize, center.z + maxSize);
                controls.target.copy(center);
                controls.update();
            }
        }
        
        function toggleWireframe() {
            if (currentModel) {
                currentModel.children.forEach(child => {
                    if (child.material) {
                        child.material.wireframe = !child.material.wireframe;
                    }
                });
            }
        }
        
        function showLimitMessage() {
            // Create overlay message
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const message = document.createElement('div');
            message.style.cssText = `
                background: var(--surface);
                border: 1px solid var(--panel-border);
                border-radius: 12px;
                padding: 32px;
                max-width: 400px;
                text-align: center;
                color: var(--primary-text);
            `;
            
            message.innerHTML = `
                <h3 style="margin-bottom: 16px; color: var(--primary-text);">Demo Complete!</h3>
                <p style="margin-bottom: 24px; color: var(--secondary-text);">
                    You've tried the demo! To create unlimited 3D models, join our waitlist for early access.
                </p>
                <button onclick="this.parentElement.parentElement.remove(); document.getElementById('waitlist-form').scrollIntoView({behavior: 'smooth'});" 
                        style="background: var(--gradient-cyan-blue); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                    Join Waitlist
                </button>
            `;
            
            overlay.appendChild(message);
            document.body.appendChild(overlay);
        }
        
        // Add Enter key support
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('demo-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !demoUsed) {
                    submitDemo();
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('waitlist-form');
            const messageDiv = document.getElementById('message');
            const accountCTA = document.querySelector('.auth-alternative');

            // Show success message after OAuth sign-up
            const params = new URLSearchParams(window.location.search);
            if (params.get('account') === 'created') {
                messageDiv.textContent = 'Success! Your account is ready.';
                messageDiv.classList.add('success-message');
                messageDiv.style.display = 'block';

                // Persist state and hide CTA
                localStorage.setItem('accountCreated', 'true');
                if (accountCTA) accountCTA.style.display = 'none';

                // Clean the URL so the message doesn\'t reappear on refresh
                window.history.replaceState({}, document.title, window.location.pathname);
            }

            // If account was created previously, hide the CTA block
            if (localStorage.getItem('accountCreated') === 'true') {
                if (accountCTA) accountCTA.style.display = 'none';
            }

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const email = formData.get('email');
                const button = form.querySelector('button');
                
                button.disabled = true;
                button.textContent = 'Joining...';
                messageDiv.style.display = 'none';
                messageDiv.className = 'message';

                // Call your Google Apps Script for waitlist signup
                const WAITLIST_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxupA83eu_ztiE55Bbhvl1dwVU3xxlW70DAnb57I9kMM71X0KycSK8tGIwvCRKUpSLmWw/exec';
                
                // Validate email format
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    messageDiv.textContent = 'Please enter a valid email address';
                    messageDiv.classList.add('error-message');
                    messageDiv.style.display = 'block';
                    button.disabled = false;
                    button.textContent = 'Get Early Access';
                    return;
                }

                // Make GET request to Google Apps Script
                const signupUrl = `${WAITLIST_SCRIPT_URL}?action=signup&email=${encodeURIComponent(email)}`;
                
                fetch(signupUrl, {
                    method: 'GET',
                    mode: 'no-cors' // Required for Google Apps Script
                })
                .then(() => {
                    // Success handling (no-cors mode means we can't read the response)
                    form.style.display = 'none';
                    messageDiv.textContent = "Thanks for joining! We'll be in touch soon with your free early access.";
                    messageDiv.classList.add('success-message');
                    messageDiv.style.display = 'block';
                    
                    // Track signup
                    console.log('Waitlist signup:', email);
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    messageDiv.textContent = 'Something went wrong. Please check your email and try again.';
                    messageDiv.classList.add('error-message');
                    messageDiv.style.display = 'block';

                    button.disabled = false;
                    button.textContent = 'Get Early Access';
                });
            });
        });
    </script>
</body>
</html>
